@using ECommerceApi.Model
@model List<Customer>
@{
    ViewData["Title"] = "CustomerView";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}


<body>
    <div class="btn btn-warning " style="margin-bottom:30px;margin-left:90%">
        @Html.ActionLink("Add Customer", "Add")
    </div>
    <table class="table" style="color:black" id="dataTable" >
        <thead style="background-color:khaki;padding:1%;margin-top:30px ">
        <td style="background-color:khaki">
                CustomerId
            </td>


        <td style="background-color:khaki">
                CustomerName
            </td>


        <td style="background-color:khaki">
                MobileNo
            </td>
        <td style ="background-color:khaki;text-align:center">Detail</td>
              <td style="text-align:center ;background-color:khaki">
                Action
            </td>
         
         </thead> 
         <tbody>



       
        @foreach(var item in Model)
        {
            <tr>
                <td >
                    @item.CustomerId
                </td>
                <td>
                    @item.Name
                </td>
                <td>
                    @item.ContactNumber
                </td>
                    <td style="text-align:center">
                        <a class="btn btn-secondary text-white" 
                        onclick="detailCustomer(@item.CustomerId)"
                        @*href="/CustomerMvc/CustomerDetailView/@item.CustomerId"*@>
                        Order Detail</a>
                       
                    </td>
                 <td style="text-align:center">
                  <a class="btn btn-primary text-white" href="/CustomerMvc/Update/@item.CustomerId" @*onclick="editCustomer(@item.CustomerId)"*@>Edit</a>
                <a class="btn btn-danger text-white"@* href="/CustomerMvc/Delete/@item.CustomerId"*@ onclick="deleteCustomer(@item.CustomerId)">delete</a>
              
                      
                    
                 </td>
            </tr>
        }
        </tbody>
        <tfoot>
            <td>

            </td>
        </tfoot>
    </table>

    </body>
    <script src="@Url.Content("~/wwwroot/Js/Customer.js")" type="text/javascript"></script>
<script>
   function deleteCustomer(customerid) {
    let result = confirm("Are you sure you want to delete?");
    if (result) {
        $.ajax({
            type: "get",
            url: '/CustomerMvc/Delete?id=' + customerid,
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function (response) {
                if (response.success == true) {
                    location.reload();
                }
                else {
                    alert(response.message);
                }
            },
            error: function () {
                alert("error");
            }
        });
    }
}

    function detailCustomer(customerid) {
        
        window.location.href = '/CustomerMvc/CustomerDetailView?Id=' + customerid;
        //let result = confirm("Are you sure you want Show detail?");
        //if (result) {
        //    //window.location.href = '/CustomerMvc/CustomerDetailView?Id=' + customerid';
        //    $.ajax({
              
        //        type: "get",
        //        url: '/CustomerMvc/CustomerDetailView?Id=' + customerid,
        //        contentType: 'application/json; charset=utf-8',
        //        dataType: 'json',
        //        success: function (response) {
        //            if (response.success == true) {
                     
        //            }
        //            else {
        //                alert(response.message);
        //            }
        //        },
        //        error: function (ex) {
        //            debugger;                    
        //            alert("error");
        //        }
        //    });
        //}
    }


</script>

@section scripts{

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css" />

    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.js"></script>


    <script>
        $(document).ready(function () {
            $("#dataTable").DataTable();
        })
    </script>
}